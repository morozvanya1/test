<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Fitness App</title>

  <style>
    :root {
      /* Telegram color palette */
      --bg: #0e1621;
      --card: #17212b;
      --accent: #2aabee;
      --accent-soft: #1f3a52;
      --text: #e7e8ea;
      --muted: #8a98a9;
      --danger: #ef4444;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 14px 14px 90px;
      font-family: -apple-system, BlinkMacSystemFont, system-ui;
      background: linear-gradient(180deg, #0e1621, #0b141d);
      color: var(--text);
    }

    h1 { font-size: 1.4rem; margin: 10px 0 14px; }
    h2 { font-size: 1.1rem; margin-bottom: 8px; }

    .card {
      background: rgba(23,33,43,.92);
      border-radius: 16px;
      padding: 14px;
      margin-bottom: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
    }

    input, select, button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid #22303c;
      background: #0e1621;
      color: var(--text);
      font-size: 1rem;
    }

    button.primary {
      background: linear-gradient(180deg, #2aabee, #229ed9);
      border: none;
      color: #ffffff;
      font-weight: 700;
    }

    button.danger {
      background: var(--danger);
      border: none;
      color: white;
    }

    .day {
      margin-bottom: 14px;
    }

    .exercise {
      display: flex;
      flex-direction: column;
      gap: 4px;
      border-top: 1px solid #1e293b;
      padding-top: 8px;
      margin-top: 8px;
    }

    .exercise-actions {
      display: flex;
      gap: 6px;
    }

    .icon-btn {
      padding: 6px 8px;
      font-size: 0.8rem;
      border-radius: 999px;
      width: auto;
      min-width: 32px;
      background: #020617;
      border: 1px solid #1e293b;
    }

    .icon-btn:hover {
      background: #020617;
    }

    .icon-btn.danger {
      border-color: #7f1d1d;
    }
      border-top: 1px solid #1e293b;
      padding-top: 8px;
      margin-top: 8px;
    }

    .date { font-size: .75rem; color: var(--muted); }

    .row {
      display: flex;
      gap: 6px;
      margin-top: 6px;
    }

    .row button {
      flex: 0;
      padding: 6px 10px;
      font-size: 0.85rem;
      border-radius: 10px;
    }
    .row button { flex: 1; }

    .tabbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 8px 10px env(safe-area-inset-bottom);
      background: rgba(14,22,33,.95);
      display: flex;
      gap: 8px;
      box-shadow: 0 -10px 30px rgba(0,0,0,.6);
    }

    .tabbar button { flex: 1; }
  </style>
</head>
<body>

<h1>üèãÔ∏è Fitness</h1>

<div class="card">
  <h2>–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>

  <select id="exercise">
    <option value="">–í—ã–±–µ—Ä–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</option>
    <option>–ñ–∏–º –ª—ë–∂–∞</option>
    <option>–ü—Ä–∏—Å–µ–¥</option>
    <option>–°—Ç–∞–Ω–æ–≤–∞—è —Ç—è–≥–∞</option>
    <option>–ñ–∏–º –ø–ª–µ—á</option>
    <option>–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è</option>
  </select>

  <input id="sets" type="number" placeholder="–ü–æ–¥—Ö–æ–¥—ã" />
  <input id="reps" type="number" placeholder="–ü–æ–≤—Ç–æ—Ä—ã" />
  <input id="weight" type="number" placeholder="–í–µ—Å (–∫–≥)" />
  <button class="primary" onclick="saveWorkout()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<div class="card">
  <h2>–ò—Å—Ç–æ—Ä–∏—è</h2>
  <div id="history"></div>
</div>

<div class="tabbar">
  <button class="danger" onclick="clearAll()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
  <button onclick="scrollTo({top:0,behavior:'smooth'})">–ù–∞–≤–µ—Ä—Ö</button>
</div>

<script>
  const historyEl = document.getElementById('history')
  let editId = null

  function getData() {
    try {
      return JSON.parse(localStorage.getItem('fitness') || '[]')
    } catch {
      return []
    }
  }

  function saveWorkout() {
    const exercise = document.getElementById('exercise')
    const sets = document.getElementById('sets')
    const reps = document.getElementById('reps')
    const weight = document.getElementById('weight')

    if (!exercise.value) return alert('–í—ã–±–µ—Ä–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ')

    const data = getData()

    if (editId) {
      const w = data.find(x => x.id === editId)
      Object.assign(w, {
        name: exercise.value,
        sets: Number(sets.value),
        reps: Number(reps.value),
        weight: Number(weight.value)
      })
      editId = null
    } else {
      data.push({
        id: crypto.randomUUID(),
        name: exercise.value,
        sets: Number(sets.value),
        reps: Number(reps.value),
        weight: Number(weight.value),
        date: Date.now()
      })
    }

    localStorage.setItem('fitness', JSON.stringify(data))
    exercise.value = sets.value = reps.value = weight.value = ''
    render()
  }

  function render() {
    historyEl.innerHTML = ''
    const data = getData().sort((a,b)=>b.date-a.date)

    const grouped = {}
    data.forEach(w => {
      const day = new Date(w.date).toLocaleDateString()
      grouped[day] ??= []
      grouped[day].push(w)
    })

    Object.entries(grouped).forEach(([day, workouts]) => {
      const dayDiv = document.createElement('div')
      dayDiv.className = 'day'
      dayDiv.innerHTML = `<b>${day}</b>`

      workouts.forEach(w => {
        const div = document.createElement('div')
        div.className = 'exercise'
        div.innerHTML = `
          <b>${w.name}</b><br>
          ${w.sets} √ó ${w.reps} ‚Ä¢ ${w.weight} –∫–≥<br>
          <div class="exercise-actions">
            <button class="icon-btn" onclick="editWorkout('${w.id}')">‚úèÔ∏è</button>
            <button class="icon-btn danger" onclick="deleteWorkout('${w.id}')">üóë</button>
          </div>
        `
        dayDiv.appendChild(div)
      })

      historyEl.appendChild(dayDiv)
    })
  }

  function editWorkout(id) {
    const w = getData().find(x => x.id === id)
    if (!w) return

    document.getElementById('exercise').value = w.name
    document.getElementById('sets').value = w.sets
    document.getElementById('reps').value = w.reps
    document.getElementById('weight').value = w.weight

    editId = id
    scrollTo({ top: 0, behavior: 'smooth' })
  }

  function deleteWorkout(id) {
    if (!confirm('–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?')) return
    const data = getData().filter(w => w.id !== id)
    localStorage.setItem('fitness', JSON.stringify(data))
    render()
  }

  function clearAll() {
    if (confirm('–£–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ?')) {
      localStorage.removeItem('fitness')
      render()
    }
  }

  render()
</script>

</body>
</html>
